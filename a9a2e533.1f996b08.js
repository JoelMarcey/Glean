(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{108:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return o})),n.d(t,"default",(function(){return d}));var a=n(3),l=n(7),i=(n(0),n(128)),b=["components"],r={id:"cli",title:"The Glean CLI tool",sidebar_label:"The Glean CLI tool"},c={unversionedId:"cli",id:"cli",isDocsHomePage:!1,title:"The Glean CLI tool",description:"The Glean CLI tool (glean) can create and write data into databases,",source:"@site/../docs/cli.md",slug:"/cli",permalink:"/docs/cli",version:"current",sidebar_label:"The Glean CLI tool",sidebar:"someSidebar",previous:{title:"Running the Glean Server",permalink:"/docs/server"},next:{title:"Introduction",permalink:"/docs/indexer/intro"}},o=[{value:"<code>glean create</code>",id:"glean-create",children:[]},{value:"<code>glean write</code>",id:"glean-write",children:[]},{value:"<code>glean finish</code>",id:"glean-finish",children:[]},{value:"<code>glean dump</code>",id:"glean-dump",children:[]},{value:"<code>glean delete</code>",id:"glean-delete",children:[]},{value:"<code>glean derive</code>",id:"glean-derive",children:[]},{value:"<code>glean query</code>",id:"glean-query",children:[]},{value:"<code>glean restore</code>",id:"glean-restore",children:[]},{value:"<code>glean validate</code>",id:"glean-validate",children:[]},{value:"<code>glean validate-schema</code>",id:"glean-validate-schema",children:[]},{value:"<code>glean stats</code>",id:"glean-stats",children:[]},{value:"<code>glean unfinish</code>",id:"glean-unfinish",children:[]}],p={toc:o};function d(e){var t=e.components,n=Object(l.a)(e,b);return Object(i.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"The Glean CLI tool (",Object(i.b)("inlineCode",{parentName:"p"},"glean"),") can create and write data into databases,\nperform a variety of admin tasks on databases, and also do one-off\nqueries."),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"glean")," tool accepts all the ",Object(i.b)("a",{parentName:"p",href:"running#common-options"},"common\noptions")," to specify how to connect to access\nthe databases."),Object(i.b)("p",null,"The available commands are as follows:"),Object(i.b)("h3",{id:"glean-create"},Object(i.b)("inlineCode",{parentName:"h3"},"glean create")),Object(i.b)("p",null,"Create a new database."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--finish"),Object(i.b)("br",null),"\nAlso mark the DB as complete"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--stacked REPO"),Object(i.b)("br",null),"\nCreate a stacked database on top of ",Object(i.b)("inlineCode",{parentName:"li"},"REPO"),"."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--property NAME=VALUE"),Object(i.b)("br",null),"\nSet properties when creating a DB"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"FILE.."),Object(i.b)("br",null),"\nFile(s) of facts to write into the database (JSON). See ",Object(i.b)("a",{parentName:"li",href:"write"},"Writing data\nto Glean"),".")),Object(i.b)("h3",{id:"glean-write"},Object(i.b)("inlineCode",{parentName:"h3"},"glean write")),Object(i.b)("p",null,"Write facts to a database."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"FILE.."),Object(i.b)("br",null),"\nFile(s) of facts to write into the database (JSON). See ",Object(i.b)("a",{parentName:"li",href:"write"},"Writing data\nto Glean"),"."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--finish"),Object(i.b)("br",null),"\nAlso mark the DB as complete")),Object(i.b)("h3",{id:"glean-finish"},Object(i.b)("inlineCode",{parentName:"h3"},"glean finish")),Object(i.b)("p",null,"Notify server that a database is complete."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database")),Object(i.b)("h3",{id:"glean-dump"},Object(i.b)("inlineCode",{parentName:"h3"},"glean dump")),Object(i.b)("p",null,"Dump the contents of the specified database into a file."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"FILE"),Object(i.b)("br",null),"\nFile to write the facts into")),Object(i.b)("h3",{id:"glean-delete"},Object(i.b)("inlineCode",{parentName:"h3"},"glean delete")),Object(i.b)("p",null,"Delete a database."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database")),Object(i.b)("h3",{id:"glean-derive"},Object(i.b)("inlineCode",{parentName:"h3"},"glean derive")),Object(i.b)("p",null,"Derive and store a predicate. See ",Object(i.b)("a",{parentName:"p",href:"derived"},"Derived Predicates"),"."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--page-bytes BYTES"),Object(i.b)("br",null),"\nMaximum number of bytes per page")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--page-facts FACTS"),Object(i.b)("br",null),"\nMaximum number of facts per page")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"PREDICATE"),Object(i.b)("br",null),"\nPredicates to derive"))),Object(i.b)("h3",{id:"glean-query"},Object(i.b)("inlineCode",{parentName:"h3"},"glean query")),Object(i.b)("p",null,"Execute an Angle query and print the results, or write them to a file."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"p"},"--repo-name NAME"),Object(i.b)("br",null),"\nSpecifies the database to query")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--page-bytes BYTES"),Object(i.b)("br",null),"\nMaximum number of bytes per page")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--page-facts FACTS"),Object(i.b)("br",null),"\nMaximum number of facts per page")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--recursive"),Object(i.b)("br",null),"\nFetch nested facts (slower)")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--limit FACTS"),Object(i.b)("br",null),"\nMaximum number of facts to query")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"-o,--output FILE"),Object(i.b)("br",null),"\nOutput the facts to a file")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--stats FILE"),Object(i.b)("br",null),"\nOutput stats to a file ('-' for stdout)")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--timeout MILLISECONDS"),"\nOverride the default query timeout")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"QUERY"),"\nquery to execute (",Object(i.b)("inlineCode",{parentName:"p"},"@file")," to read from file, ",Object(i.b)("inlineCode",{parentName:"p"},"-")," for stdin)")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--omit-results"),"\nDon't print results; use with ",Object(i.b)("inlineCode",{parentName:"p"},"--stat")," to get a count of results"))),Object(i.b)("h3",{id:"glean-restore"},Object(i.b)("inlineCode",{parentName:"h3"},"glean restore")),Object(i.b)("p",null,"Restore a database from backup."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"LOCATOR"),Object(i.b)("br",null),"\nDB location, see ",Object(i.b)("inlineCode",{parentName:"li"},":list-all")," in glean-shell")),Object(i.b)("p",null,"Alternatively the DB to restore can be specified by:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME")," and (",Object(i.b)("inlineCode",{parentName:"li"},"--repo-hash HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--date YYY-MM-DD"),")")),Object(i.b)("h3",{id:"glean-validate"},Object(i.b)("inlineCode",{parentName:"h3"},"glean validate")),Object(i.b)("p",null,"Perform checks on the internal integrity of a database. This is for\ntesting and debugging Glean itself."),Object(i.b)("p",null," a local database"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"p"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--no-typecheck"),Object(i.b)("br",null),"\nDon't typecheck facts.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--no-keys"),Object(i.b)("br",null),"\nDon't verify key uniqueness")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"--limit N"),Object(i.b)("br",null),"\nOnly validate the first N facts"))),Object(i.b)("h3",{id:"glean-validate-schema"},Object(i.b)("inlineCode",{parentName:"h3"},"glean validate-schema")),Object(i.b)("p",null,"Validate a schema. Checks that a new schem does not modify any of the\npredicates in the existing schema, which could lead to problems."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"FILE"),Object(i.b)("br",null),"\nName of schema file")),Object(i.b)("h3",{id:"glean-stats"},Object(i.b)("inlineCode",{parentName:"h3"},"glean stats")),Object(i.b)("p",null,"Get fact counts and sizes. Like the ",Object(i.b)("inlineCode",{parentName:"p"},":statistics")," command in the shell."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database")),Object(i.b)("h3",{id:"glean-unfinish"},Object(i.b)("inlineCode",{parentName:"h3"},"glean unfinish")),Object(i.b)("p",null,"Unfinish a local database (turn it from complete to incomplete\nstate). This is for testing and development and not for routine use:\nonce a database is marked complete it could be replicated, so we\nshouldn't be modifying it."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"--repo NAME/HASH")," or ",Object(i.b)("inlineCode",{parentName:"li"},"--repo-name NAME --repo-hash HASH"),Object(i.b)("br",null),"\nSpecifies the name and hash of the database")))}d.isMDXComponent=!0},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),l=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=l.a.createContext({}),p=function(e){var t=l.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return l.a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},s=l.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,b=e.parentName,o=c(e,["components","mdxType","originalType","parentName"]),d=p(n),s=a,m=d["".concat(b,".").concat(s)]||d[s]||u[s]||i;return n?l.a.createElement(m,r(r({ref:t},o),{},{components:n})):l.a.createElement(m,r({ref:t},o))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,b=new Array(i);b[0]=s;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r.mdxType="string"==typeof e?e:a,b[1]=r;for(var o=2;o<i;o++)b[o]=n[o];return l.a.createElement.apply(null,b)}return l.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"}}]);